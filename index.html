<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamDiscovery - ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* CSS: ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô Dark Mode */
        :root {
            --dark-bg: #141414;
            --card-bg: #242424;
            --accent-color: #e50914; /* ‡πÅ‡∏î‡∏á */
            --text-color: #ffffff;
            --light-gray: #aaa;
            --font-family: 'Kanit', sans-serif;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--dark-bg);
            color: var(--text-color);
            margin: 0;
            padding: 0;
        }

        /* Header ‡πÅ‡∏•‡∏∞ Navigation */
        .header {
            background-color: #0c0c0c;
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .logo {
            font-size: 1.8em;
            font-weight: 600;
            color: var(--accent-color);
        }

        /* Search Bar */
        .search-container {
            position: relative;
        }
        #search-input {
            padding: 10px 15px;
            border-radius: 20px;
            border: 2px solid var(--accent-color);
            background-color: #333;
            color: var(--text-color);
            width: 300px;
            transition: width 0.3s;
        }
        #search-input:focus {
            width: 350px;
            outline: none;
            box-shadow: 0 0 5px var(--accent-color);
        }

        /* Main Content */
        .main-content {
            padding: 40px;
        }
        h2 {
            color: var(--text-color);
            border-left: 5px solid var(--accent-color);
            padding-left: 10px;
            margin-bottom: 25px;
        }
        
        /* Movie Grid */
        #movies-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 25px;
        }
        .movie-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.6);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            height: 450px; /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ñ‡∏á‡∏ó‡∏µ‡πà */
            display: flex;
            flex-direction: column;
        }
        .movie-card:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.8);
        }
        .movie-card img {
            width: 100%;
            height: 300px; /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå */
            object-fit: cover;
            display: block;
        }
        .movie-info {
            padding: 15px;
            text-align: left;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .movie-info h3 {
            margin: 0;
            font-size: 1.1em;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            line-height: 1.4;
        }
        .rating {
            font-size: 0.9em;
            color: #ffc107; /* ‡∏™‡∏µ‡∏î‡∏≤‡∏ß */
            margin-top: 5px;
        }

        /* Modal (‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î) */
        .modal {
            display: none;
            position: fixed;
            z-index: 200;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.9);
            padding-top: 50px;
        }
        .modal-content {
            background-color: var(--card-bg);
            margin: 5% auto;
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 900px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
            position: relative;
        }
        .close-btn {
            color: var(--light-gray);
            float: right;
            font-size: 35px;
            font-weight: bold;
            transition: color 0.2s;
        }
        .close-btn:hover,
        .close-btn:focus {
            color: var(--accent-color);
            text-decoration: none;
            cursor: pointer;
        }
        .modal-details {
            display: flex;
            gap: 30px;
            margin-top: 20px;
        }
        .modal-details img {
            width: 250px;
            border-radius: 8px;
            object-fit: cover;
        }
        .movie-text {
            flex-grow: 1;
        }
        .movie-text h2 {
            margin-top: 0;
            border: none;
        }
        .trailer-container {
            margin-top: 20px;
        }
        .trailer-container iframe {
            width: 100%;
            height: 450px;
            border-radius: 8px;
        }
        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.2em;
            color: var(--light-gray);
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="logo">StreamDiscovery</div>
        <div class="search-container">
            <input type="text" id="search-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå..." onkeyup="handleSearch(event)">
        </div>
    </div>

    <div class="main-content">
        <h2 id="section-title">üé¨ ‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°</h2>
        <div id="movies-container">
            <p class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
        </div>
    </div>

    <div id="movie-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <div id="modal-body">
                </div>
        </div>
    </div>

    <script>
        // *** 1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API ‡πÅ‡∏•‡∏∞ URL ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô ***
        const API_KEY = 'YOUR_TMDB_API_KEY'; // <--- **‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢ TMDB API Key ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì**
        const BASE_URL = 'https://api.themoviedb.org/3';
        const IMAGE_BASE_URL = 'https://image.tmdb.org/t/p/';
        const LANG = 'th-TH'; // ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢

        const moviesContainer = document.getElementById('movies-container');
        const sectionTitle = document.getElementById('section-title');
        const modal = document.getElementById('movie-modal');
        const modalBody = document.getElementById('modal-body');

        // *** 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å: ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå ***
        async function fetchMovies(endpoint, title) {
            moviesContainer.innerHTML = '<p class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>';
            sectionTitle.textContent = title;

            const url = `${BASE_URL}${endpoint}?api_key=${API_KEY}&language=${LANG}&page=1`;

            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                displayMovies(data.results);
            } catch (error) {
                console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:", error);
                moviesContainer.innerHTML = '<p class="loading">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ: ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API Key ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</p>';
            }
        }

        // *** 3. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå (Card View) ***
        function displayMovies(movies) {
            moviesContainer.innerHTML = '';
            if (movies.length === 0) {
                moviesContainer.innerHTML = '<p class="loading">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</p>';
                return;
            }

            movies.forEach(movie => {
                const movieCard = document.createElement('div');
                movieCard.classList.add('movie-card');
                movieCard.onclick = () => fetchMovieDetails(movie.id); // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å ‡πÉ‡∏´‡πâ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                
                // ‡πÉ‡∏ä‡πâ w500 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ö‡∏ô Card
                const posterPath = movie.poster_path 
                    ? `${IMAGE_BASE_URL}w500${movie.poster_path}`
                    : 'https://via.placeholder.com/200x300?text=No+Poster';

                const rating = movie.vote_average ? `${movie.vote_average.toFixed(1)}/10` : 'N/A';

                movieCard.innerHTML = `
                    <img src="${posterPath}" alt="${movie.title || movie.name} Poster">
                    <div class="movie-info">
                        <h3>${movie.title || movie.name}</h3>
                        <p class="rating">‚≠ê ${rating}</p>
                    </div>
                `;
                moviesContainer.appendChild(movieCard);
            });
        }

        // *** 4. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ***
        function handleSearch(event) {
            const query = event.target.value.trim();
            
            // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î Enter ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
            if ((event.key === 'Enter' || (event.type === 'keyup' && query.length >= 3)) && query !== "") {
                const endpoint = `/search/movie`;
                const title = `üîé ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤: "${query}"`;
                
                const url = `${BASE_URL}${endpoint}?api_key=${API_KEY}&query=${encodeURIComponent(query)}&language=${LANG}&page=1`;
                
                fetchMovies(url, title);
            } else if (query === "" && event.type === 'keyup') {
                // ‡∏ñ‡πâ‡∏≤‡∏•‡πâ‡∏≤‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°
                fetchMovies('/movie/popular', 'üé¨ ‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°');
            }
        }
        
        // *** 5. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ***
        async function fetchMovieDetails(movieId) {
            modalBody.innerHTML = '<p class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î...</p>';
            modal.style.display = "block"; // ‡πÄ‡∏õ‡∏¥‡∏î Modal

            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å
            const detailsUrl = `${BASE_URL}/movie/${movieId}?api_key=${API_KEY}&language=${LANG}`;
            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠
            const videosUrl = `${BASE_URL}/movie/${movieId}/videos?api_key=${API_KEY}`;

            try {
                const [detailsResponse, videosResponse] = await Promise.all([
                    fetch(detailsUrl),
                    fetch(videosUrl)
                ]);

                const details = await detailsResponse.json();
                const videos = await videosResponse.json();

                // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô Trailer ‡∏´‡∏•‡∏±‡∏Å‡∏à‡∏≤‡∏Å YouTube
                const trailer = videos.results.find(vid => vid.site === 'YouTube' && vid.type === 'Trailer') || videos.results[0];
                
                displayMovieDetails(details, trailer);

            } catch (error) {
                console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:", error);
                modalBody.innerHTML = '<p class="loading">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå‡πÑ‡∏î‡πâ</p>';
            }
        }

        // *** 6. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏ô Modal ***
        function displayMovieDetails(details, trailer) {
            // ‡πÉ‡∏ä‡πâ w780 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏ô Modal
            const posterPath = details.poster_path 
                ? `${IMAGE_BASE_URL}w500${details.poster_path}`
                : 'https://via.placeholder.com/250x375?text=No+Poster';

            const genres = details.genres ? details.genres.map(g => g.name).join(', ') : 'N/A';
            const runtime = details.runtime ? `${Math.floor(details.runtime / 60)} ‡∏ä‡∏°. ${details.runtime % 60} ‡∏ô‡∏≤‡∏ó‡∏µ` : 'N/A';
            const trailerEmbed = trailer 
                ? `<iframe src="https://www.youtube.com/embed/${trailer.key}" frameborder="0" allowfullscreen></iframe>`
                : '<p style="color:red;">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</p>';
            
            modalBody.innerHTML = `
                <div class="modal-details">
                    <img src="${posterPath}" alt="${details.title} Poster">
                    <div class="movie-text">
                        <h2>${details.title}</h2>
                        <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏â‡∏≤‡∏¢:</strong> ${details.release_date || 'N/A'}</p>
                        <p><strong>‡πÅ‡∏ô‡∏ß:</strong> ${genres}</p>
                        <p><strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß:</strong> ${runtime}</p>
                        <p><strong>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô TMDB:</strong> ‚≠ê ${details.vote_average.toFixed(1)}/10 (${details.vote_count} ‡πÇ‡∏´‡∏ß‡∏ï)</p>
                        <br>
                        <h3>‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡πà‡∏≠</h3>
                        <p>${details.overview || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢'}</p>
                    </div>
                </div>
                <div class="trailer-container">
                    <h3>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå (Trailer)</h3>
                    ${trailerEmbed}
                </div>
            `;
        }

        // *** 7. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏¥‡∏î Modal ***
        function closeModal() {
            modal.style.display = "none";
            // ‡∏´‡∏¢‡∏∏‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î Modal (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
            modalBody.innerHTML = '';
        }

        // ‡∏õ‡∏¥‡∏î Modal ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ô‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á
        window.onclick = function(event) {
            if (event.target == modal) {
                closeModal();
            }
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏õ‡∏¥‡∏î
        fetchMovies('/movie/popular', 'üé¨ ‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°');
    </script>
</body>
</html>